#blabla

IF(WIN32)
	SET(EXT cmd)
	SET(OS_FLAGS "--no-pause")
	SET(OV_LOGFILE "$ENV{APPDATA}/openvibe/log/openvibe-designer.log")
ELSE(WIN32)
	SET(EXT sh)
	SET(OS_FLAGS "")
	SET(OV_LOGFILE "$ENV{HOME}/.config/openvibe/log/openvibe-designer.log")	
ENDIF(WIN32)

SET(TEST_SCENARIOS PLDA-OneVsOne-HT-Test PLDA-OneVsOne-PKPD-Test PLDA-OneVsOne-Voting-Test PLDA-OneVsAll-Test LDA-OneVsOne-Voting-Test LDA-OneVsAll-Test sLDA-OneVsOne-Voting-Test sLDA-OneVsAll-Test PsLDA-OneVsOne-HT-Test PsLDA-OneVsOne-PKPD-Test PsLDA-OneVsOne-Voting-Test PsLDA-OneVsAll-Test SVM-Native-Test SVM-OneVsOne-Voting-Test SVM-OneVsAll-Test)

FOREACH(TEST_NAME ${TEST_SCENARIOS})

	SET(SCENARIO_TO_TEST "${TEST_NAME}.xml")

	ADD_TEST(run_${TEST_NAME} "$ENV{OV_BINARY_PATH}/openvibe-designer.${EXT}" ${OS_FLAGS} "--no-gui"  "--no-session-management" "--play-fast" ${SCENARIO_TO_TEST})
	ADD_TEST(comparator_${TEST_NAME} "$ENV{OV_BINARY_PATH}/test_accuracy.${EXT}" "${OS_FLAGS}" "${OV_LOGFILE}")
	ADD_TEST(clean_${TEST_NAME} rm -f ${OV_LOGFILE} classifiers/multiclass.xml)
	SET_TESTS_PROPERTIES(run_${TEST_NAME} PROPERTIES ATTACHED_FILES_ON_FAIL ${OV_LOGFILE})
	SET_TESTS_PROPERTIES(comparator_${TEST_NAME} PROPERTIES DEPENDS run_${TEST_NAME}})
	SET_TESTS_PROPERTIES(comparator_${TEST_NAME} PROPERTIES ATTACHED_FILES_ON_FAIL ${OV_LOGFILE})
	SET_TESTS_PROPERTIES(clean_${TEST_NAME} PROPERTIES DEPENDS comparator_${TEST_NAME}})	
	
ENDFOREACH(TEST_NAME)


