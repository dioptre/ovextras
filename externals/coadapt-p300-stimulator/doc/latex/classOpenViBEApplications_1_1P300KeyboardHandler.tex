\hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler}{
\section{OpenViBEApplications::P300KeyboardHandler Class Reference}
\label{classOpenViBEApplications_1_1P300KeyboardHandler}\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
}


{\ttfamily \#include $<$ovexP300KeyboardHandler.h$>$}

Inheritance diagram for OpenViBEApplications::P300KeyboardHandler:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=1.978799cm]{classOpenViBEApplications_1_1P300KeyboardHandler}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structOpenViBEApplications_1_1P300KeyboardHandler_1_1FontID}{FontID}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_a2c546b532c8027e58e1d92bfa90725bf}{P300KeyboardHandler} (\hyperlink{classOpenViBEApplications_1_1GContainer}{GContainer} $\ast$container, \hyperlink{classOpenViBEApplications_1_1GContainer}{GContainer} $\ast$container2, \hyperlink{classOpenViBEApplications_1_1P300InterfacePropertyReader}{P300InterfacePropertyReader} $\ast$propertyObject, \hyperlink{classOpenViBEApplications_1_1P300ScreenLayoutReader}{P300ScreenLayoutReader} $\ast$layoutPropObject)
\item 
virtual \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_a1a73858b58e29867eacf0efe3a055625}{$\sim$P300KeyboardHandler} ()
\item 
virtual void \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_a89578d0bd9802e87f0c82066c6cb5c77}{update} (\hyperlink{classOpenViBEApplications_1_1GObservable}{GObservable} $\ast$observable, const void $\ast$pUserData)
\item 
virtual void \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_abc75584b55a59ca0731ccedd94a5d14d}{addObserver} (\hyperlink{classOpenViBEApplications_1_1GObserver}{GObserver} $\ast$observer)
\item 
virtual void \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_a09d41e4e8a8e560e001c482f61c756f9}{addActionObserver} (OpenViBE::CString action, \hyperlink{classOpenViBEApplications_1_1GObserver}{GObserver} $\ast$observer)
\item 
virtual void \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_abc59edd655f91e7a03a5a0fc8cb56963}{updateChildProperties} ()
\item 
virtual void \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_ad7ee4d1491a579744ea1e31c54de3a95}{updateChildStates} (OpenViBE::uint32 $\ast$states)
\item 
virtual void \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_a4e10715137c1355048f3cea9f6e3fa31}{resetChildStates} ()
\item 
virtual void \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_aea3770d3869fd2039f6d701e915a71cc}{updateChildProbabilities} (OpenViBE::float64 $\ast$symbolProbabilities)
\item 
virtual void \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_a0df195cacfb10e16e0ad155c790093fb}{resetMostActiveChildStates} ()
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classOpenViBEApplications_1_1GContainer}{GContainer} $\ast$ \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_a22390cd11cae7a74d0d22a52edb4f32c}{m\_\-pSymbolContainer}
\item 
\hyperlink{classOpenViBEApplications_1_1GContainer}{GContainer} $\ast$ \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_aaa8dbe9e453a27bb6741a57be97e9110}{m\_\-pPredictionContainer}
\item 
\hyperlink{classOpenViBEApplications_1_1P300InterfacePropertyReader}{P300InterfacePropertyReader} $\ast$ \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_a957c021c16780736cf2e175cdebc1f5a}{m\_\-pPropertyObject}
\item 
\hyperlink{classOpenViBEApplications_1_1P300ScreenLayoutReader}{P300ScreenLayoutReader} $\ast$ \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_a1fd87979441e2834eef9f3f363f49561}{m\_\-pLayoutObject}
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structOpenViBEApplications_1_1GColor}{GColor} \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_a8d88c72733593905d3a94a2e156e3d68}{getAssignedProbabilityColor} (OpenViBE::uint32 symbolIndex)
\item 
void \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_ae5863a522c7a25bfdb457847bfca1d8e}{initializeColorMap} (\hyperlink{structOpenViBEApplications_1_1GColor}{GColor} startColor, \hyperlink{structOpenViBEApplications_1_1GColor}{GColor} endColor, OpenViBE::uint32 nSteps, OpenViBE::float32 sigLevel)
\item 
void \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_ae05d96dd9db790b05afb11c18fec508f}{initializeKeyboard} ()
\item 
void \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_a333f5d8f22498388e935bb960c572a7f}{setGButtonFromSLabel} (\hyperlink{classOpenViBEApplications_1_1GButton}{GButton} $\ast$gbutton, OpenViBE::uint32 keyIndex, \hyperlink{ova__defines_8h_ac2575a0c79ceb4592555fa66f173dfc8}{VisualState} keyState)
\item 
\hyperlink{classOpenViBEApplications_1_1GLabel}{GLabel} $\ast$ \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_a60751010ae5c5533655c10102290d934}{constructGLabelFromDescriptor} (OpenViBE::uint32 keyIndex, \hyperlink{ova__defines_8h_ac2575a0c79ceb4592555fa66f173dfc8}{VisualState} state)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std::map$<$ OpenViBE::float64, \hyperlink{structOpenViBEApplications_1_1GColor}{GColor} $>$ \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_a6698e3da5de1ca1361ca0051380c70a4}{m\_\-mColorMap}
\item 
std::vector$<$ OpenViBE::float64 $>$ \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_a1ac93ed15de2fd151ec5bfaf5e71a607}{m\_\-vSymbolProbabilties}
\item 
std::vector$<$ OpenViBE::boolean $>$ \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_ae30854286f16b23de7c72f1549bd5596}{m\_\-vProbableSymbols}
\item 
std::vector$<$ OpenViBE::uint32 $>$ \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_ad280c1e2d6f779b4720d8c11b7113aaf}{m\_\-vActiveCycles}
\item 
std::vector$<$ OpenViBE::uint32 $>$ \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_a07584e22150a0ab2940cdd7a04a9dc1a}{m\_\-vSymbolStates}
\item 
std::vector$<$ OpenViBE::uint32 $>$ \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_a3767646cdb49bf416483f9f9455769fe}{m\_\-vPreviousSymbolStates}
\item 
std::vector$<$ std::vector$<$ \hyperlink{classOpenViBEApplications_1_1GButton}{GButton} $\ast$ $>$ $\ast$ $>$ $\ast$ \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_a66266cf621af51049274763bff5f1f15}{m\_\-vButtons}
\item 
OpenViBE::uint32 \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_ac82daa9b67e49894444473acf01bc075}{m\_\-ui32MaximumSymbolActivity}
\item 
std::map$<$ \hyperlink{ova__defines_8h_ac2575a0c79ceb4592555fa66f173dfc8}{VisualState}, \hyperlink{ova__defines_8h_ac2575a0c79ceb4592555fa66f173dfc8}{VisualState} $>$ \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_a069a6e082d8a9a1d099fbcd7b06a9292}{VisualStateMap}
\item 
std::map$<$ \hyperlink{structOpenViBEApplications_1_1P300KeyboardHandler_1_1FontID}{FontID}, boost::shared\_\-ptr$<$ FTFont $>$ $>$ \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler_a1a8f42a263a88dd6e6bab7f0ab690b79}{m\_\-mFontSourceMap}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
The \hyperlink{classOpenViBEApplications_1_1P300KeyboardHandler}{P300KeyboardHandler} listens to its own keys, e.g. when a key is in a flashed state the keyboard handler is notified of this event so that it can change the key with its flashed version. It is also observed by other handlers such as \hyperlink{classOpenViBEApplications_1_1P300ResultAreaHandler}{P300ResultAreaHandler} in case a symbol is selected for example. It is the \hyperlink{classOpenViBEApplications_1_1ExternalP300Visualiser}{ExternalP300Visualiser} that will communicate with this class in order to update the states of the keys depending on the stimuli the \hyperlink{classOpenViBEApplications_1_1ExternalP300Visualiser}{ExternalP300Visualiser} gets from the \hyperlink{classOpenViBEApplications_1_1ExternalP300Stimulator}{ExternalP300Stimulator}. In the background it will create vectors of GButtons for all keys specified in the keyboard layout (letters, undo, backspace, word predictions...) and make tweaked copies for all the possible states the button can be in. This takes up quite a bit of main memory, but that way the OpenGL code embedded in the GObjects can persist in graphical memory (improving performance) without having to be recreated/recompiled every time we draw something on the screen 

\subsection{Constructor \& Destructor Documentation}
\hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_a2c546b532c8027e58e1d92bfa90725bf}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!P300KeyboardHandler@{P300KeyboardHandler}}
\index{P300KeyboardHandler@{P300KeyboardHandler}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{P300KeyboardHandler}]{\setlength{\rightskip}{0pt plus 5cm}P300KeyboardHandler::P300KeyboardHandler (
\begin{DoxyParamCaption}
\item[{{\bf GContainer} $\ast$}]{container, }
\item[{{\bf GContainer} $\ast$}]{container2, }
\item[{{\bf P300InterfacePropertyReader} $\ast$}]{propertyObject, }
\item[{{\bf P300ScreenLayoutReader} $\ast$}]{layoutPropObject}
\end{DoxyParamCaption}
)}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_a2c546b532c8027e58e1d92bfa90725bf}
Constructor 
\begin{DoxyParams}{Parameters}
{\em container} & this will be the \hyperlink{classOpenViBEApplications_1_1GContainer}{GContainer} that contains all the regular static keys (i.e. not the word prediction keys that change from trial to trial) \\
\hline
{\em container2} & this is the \hyperlink{classOpenViBEApplications_1_1GContainer}{GContainer} that will contain the word predictions keys \\
\hline
{\em propertyObject} & an object containing the properties read from the interface-\/properties.xml file \\
\hline
{\em layoutPropObject} & an object containing the descriptions of the key properties as specified in the keyboard layout files such as 5by10-\/abc-\/gray.xml \\
\hline
\end{DoxyParams}
\hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_a1a73858b58e29867eacf0efe3a055625}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!$\sim$P300KeyboardHandler@{$\sim$P300KeyboardHandler}}
\index{$\sim$P300KeyboardHandler@{$\sim$P300KeyboardHandler}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{$\sim$P300KeyboardHandler}]{\setlength{\rightskip}{0pt plus 5cm}P300KeyboardHandler::$\sim$P300KeyboardHandler (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_a1a73858b58e29867eacf0efe3a055625}


\subsection{Member Function Documentation}
\hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_a09d41e4e8a8e560e001c482f61c756f9}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!addActionObserver@{addActionObserver}}
\index{addActionObserver@{addActionObserver}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{addActionObserver}]{\setlength{\rightskip}{0pt plus 5cm}void P300KeyboardHandler::addActionObserver (
\begin{DoxyParamCaption}
\item[{OpenViBE::CString}]{action, }
\item[{{\bf GObserver} $\ast$}]{observer}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_a09d41e4e8a8e560e001c482f61c756f9}
Special version of addObserver, where an observer will be added only to the keys that have a certain action specified (such as undo for example) 
\begin{DoxyParams}{Parameters}
{\em action} & the specific action for which you want to add an observer \\
\hline
{\em observer} & the observer you want to add to the keys with the specified action \\
\hline
\end{DoxyParams}
\hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_abc75584b55a59ca0731ccedd94a5d14d}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!addObserver@{addObserver}}
\index{addObserver@{addObserver}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{addObserver}]{\setlength{\rightskip}{0pt plus 5cm}void P300KeyboardHandler::addObserver (
\begin{DoxyParamCaption}
\item[{{\bf GObserver} $\ast$}]{observer}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_abc75584b55a59ca0731ccedd94a5d14d}
inherited from \hyperlink{classOpenViBEApplications_1_1GObservable}{GObservable}. Will add the observer to all the keys, all the background copies for the different states and the word prediction keys. 

Reimplemented from \hyperlink{classOpenViBEApplications_1_1GObservable_a1fb6672b187acd1fe6cbb162b5d09b79}{OpenViBEApplications::GObservable}.

\hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_a60751010ae5c5533655c10102290d934}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!constructGLabelFromDescriptor@{constructGLabelFromDescriptor}}
\index{constructGLabelFromDescriptor@{constructGLabelFromDescriptor}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{constructGLabelFromDescriptor}]{\setlength{\rightskip}{0pt plus 5cm}{\bf GLabel} $\ast$ P300KeyboardHandler::constructGLabelFromDescriptor (
\begin{DoxyParamCaption}
\item[{OpenViBE::uint32}]{keyIndex, }
\item[{{\bf VisualState}}]{state}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_a60751010ae5c5533655c10102290d934}
Some helper function that creates a \hyperlink{classOpenViBEApplications_1_1GLabel}{GLabel} for a \hyperlink{classOpenViBEApplications_1_1GButton}{GButton} based on information in key descriptor for the key at index 'keyIndex' in state 'state' \begin{DoxyReturn}{Returns}
the newly created \hyperlink{classOpenViBEApplications_1_1GLabel}{GLabel} based on information of the key descriptor for the key at index 'keyIndex' in state 'state' 
\end{DoxyReturn}
\hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_a8d88c72733593905d3a94a2e156e3d68}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!getAssignedProbabilityColor@{getAssignedProbabilityColor}}
\index{getAssignedProbabilityColor@{getAssignedProbabilityColor}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{getAssignedProbabilityColor}]{\setlength{\rightskip}{0pt plus 5cm}{\bf GColor} P300KeyboardHandler::getAssignedProbabilityColor (
\begin{DoxyParamCaption}
\item[{OpenViBE::uint32}]{symbolIndex}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_a8d88c72733593905d3a94a2e156e3d68}
\hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_ae5863a522c7a25bfdb457847bfca1d8e}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!initializeColorMap@{initializeColorMap}}
\index{initializeColorMap@{initializeColorMap}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{initializeColorMap}]{\setlength{\rightskip}{0pt plus 5cm}void P300KeyboardHandler::initializeColorMap (
\begin{DoxyParamCaption}
\item[{{\bf GColor}}]{startColor, }
\item[{{\bf GColor}}]{endColor, }
\item[{OpenViBE::uint32}]{nSteps, }
\item[{OpenViBE::float32}]{sigLevel}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_ae5863a522c7a25bfdb457847bfca1d8e}
Creates a map that associates each probability -\/ ranging from sigLevel to 1.0 in nSteps number of steps -\/ with a color starting from startColor and ending with endColor \hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_ae05d96dd9db790b05afb11c18fec508f}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!initializeKeyboard@{initializeKeyboard}}
\index{initializeKeyboard@{initializeKeyboard}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{initializeKeyboard}]{\setlength{\rightskip}{0pt plus 5cm}void P300KeyboardHandler::initializeKeyboard (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_ae05d96dd9db790b05afb11c18fec508f}
\hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_a4e10715137c1355048f3cea9f6e3fa31}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!resetChildStates@{resetChildStates}}
\index{resetChildStates@{resetChildStates}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{resetChildStates}]{\setlength{\rightskip}{0pt plus 5cm}void P300KeyboardHandler::resetChildStates (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_a4e10715137c1355048f3cea9f6e3fa31}
reset the states of all the keys to NOFLASH \hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_a0df195cacfb10e16e0ad155c790093fb}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!resetMostActiveChildStates@{resetMostActiveChildStates}}
\index{resetMostActiveChildStates@{resetMostActiveChildStates}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{resetMostActiveChildStates}]{\setlength{\rightskip}{0pt plus 5cm}void P300KeyboardHandler::resetMostActiveChildStates (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_a0df195cacfb10e16e0ad155c790093fb}
This will reset the state of the keys that have been in the FLASH state the longest, see also updateChildStates. \hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_a333f5d8f22498388e935bb960c572a7f}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!setGButtonFromSLabel@{setGButtonFromSLabel}}
\index{setGButtonFromSLabel@{setGButtonFromSLabel}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{setGButtonFromSLabel}]{\setlength{\rightskip}{0pt plus 5cm}void P300KeyboardHandler::setGButtonFromSLabel (
\begin{DoxyParamCaption}
\item[{{\bf GButton} $\ast$}]{gbutton, }
\item[{OpenViBE::uint32}]{keyIndex, }
\item[{{\bf VisualState}}]{keyState}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_a333f5d8f22498388e935bb960c572a7f}
Some helper function that modifies the gbutton with the properties as specified in the key descriptor for the key at index 'keyIndex' in state 'keyState' 
\begin{DoxyParams}{Parameters}
{\em gbutton} & button for which the properties will be changed \\
\hline
\end{DoxyParams}
\hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_a89578d0bd9802e87f0c82066c6cb5c77}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!update@{update}}
\index{update@{update}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{update}]{\setlength{\rightskip}{0pt plus 5cm}void P300KeyboardHandler::update (
\begin{DoxyParamCaption}
\item[{{\bf GObservable} $\ast$}]{observable, }
\item[{const void $\ast$}]{pUserData}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_a89578d0bd9802e87f0c82066c6cb5c77}
inherited from \hyperlink{classOpenViBEApplications_1_1GObserver}{GObserver}. If the \hyperlink{classOpenViBEApplications_1_1GObservable}{GObservable} is a \hyperlink{classOpenViBEApplications_1_1GButton}{GButton} then it will copy the new button in pUserData over the old one, if the \hyperlink{classOpenViBEApplications_1_1GObservable}{GObservable} is a \hyperlink{classOpenViBEApplications_1_1P300PredictionboardHandler}{P300PredictionboardHandler} then it will update the words in the word-\/prediction-\/containter with the new most probable words. 
\begin{DoxyParams}{Parameters}
{\em observable} & will either be a \hyperlink{classOpenViBEApplications_1_1GButton}{GButton} or the \hyperlink{classOpenViBEApplications_1_1P300PredictionboardHandler}{P300PredictionboardHandler} \\
\hline
{\em pUserData} & in case observable is a \hyperlink{classOpenViBEApplications_1_1GButton}{GButton} then pUserData will also be a \hyperlink{classOpenViBEApplications_1_1GButton}{GButton} containing the new button that needs to be displyed. in case observable is the \hyperlink{classOpenViBEApplications_1_1P300PredictionboardHandler}{P300PredictionboardHandler}, then pUserData will be a vector of strings containing the new predicted words. \\
\hline
\end{DoxyParams}


Implements \hyperlink{classOpenViBEApplications_1_1GObserver_a798ae875586bc6cf2c636272a97522f5}{OpenViBEApplications::GObserver}.

\hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_aea3770d3869fd2039f6d701e915a71cc}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!updateChildProbabilities@{updateChildProbabilities}}
\index{updateChildProbabilities@{updateChildProbabilities}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{updateChildProbabilities}]{\setlength{\rightskip}{0pt plus 5cm}void P300KeyboardHandler::updateChildProbabilities (
\begin{DoxyParamCaption}
\item[{OpenViBE::float64 $\ast$}]{symbolProbabilities}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_aea3770d3869fd2039f6d701e915a71cc}
Updates the probabilities of all the symbols to enable intermediate color feedback from flash to flash 
\begin{DoxyParams}{Parameters}
{\em symbolProbabilities} & the intermediate probabilities of each of the symols \\
\hline
\end{DoxyParams}
\hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_abc59edd655f91e7a03a5a0fc8cb56963}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!updateChildProperties@{updateChildProperties}}
\index{updateChildProperties@{updateChildProperties}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{updateChildProperties}]{\setlength{\rightskip}{0pt plus 5cm}void P300KeyboardHandler::updateChildProperties (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_abc59edd655f91e7a03a5a0fc8cb56963}
This function will notify all the observers of all the keys that have changed state (improving performance) \hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_ad7ee4d1491a579744ea1e31c54de3a95}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!updateChildStates@{updateChildStates}}
\index{updateChildStates@{updateChildStates}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{updateChildStates}]{\setlength{\rightskip}{0pt plus 5cm}void P300KeyboardHandler::updateChildStates (
\begin{DoxyParamCaption}
\item[{OpenViBE::uint32 $\ast$}]{states}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_ad7ee4d1491a579744ea1e31c54de3a95}
This will update the state of all keys to a state as specified in the array states (values defined in VisualState) in case the specified state is different from NONE. For the keys that already were in the FLASH state and now are specified as state NONE, we increase instead a counter and leave the state in FLASH. This enables overlapping stimuli (see resetMostActiveChildStates) 
\begin{DoxyParams}{Parameters}
{\em states} & an array of states that specifies the state for each key (values are defined in the enum VisualState) \\
\hline
\end{DoxyParams}


\subsection{Member Data Documentation}
\hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_a6698e3da5de1ca1361ca0051380c70a4}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!m\_\-mColorMap@{m\_\-mColorMap}}
\index{m\_\-mColorMap@{m\_\-mColorMap}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{m\_\-mColorMap}]{\setlength{\rightskip}{0pt plus 5cm}std::map$<$ OpenViBE::float64, {\bf GColor} $>$ {\bf OpenViBEApplications::P300KeyboardHandler::m\_\-mColorMap}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_a6698e3da5de1ca1361ca0051380c70a4}
the map that associates probabilities to colors \hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_a1a8f42a263a88dd6e6bab7f0ab690b79}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!m\_\-mFontSourceMap@{m\_\-mFontSourceMap}}
\index{m\_\-mFontSourceMap@{m\_\-mFontSourceMap}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{m\_\-mFontSourceMap}]{\setlength{\rightskip}{0pt plus 5cm}std::map$<${\bf FontID},boost::shared\_\-ptr$<$FTFont$>$ $>$ {\bf OpenViBEApplications::P300KeyboardHandler::m\_\-mFontSourceMap}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_a1a8f42a263a88dd6e6bab7f0ab690b79}
see \hyperlink{structOpenViBEApplications_1_1P300KeyboardHandler_1_1FontID}{FontID} \hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_a1fd87979441e2834eef9f3f363f49561}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!m\_\-pLayoutObject@{m\_\-pLayoutObject}}
\index{m\_\-pLayoutObject@{m\_\-pLayoutObject}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{m\_\-pLayoutObject}]{\setlength{\rightskip}{0pt plus 5cm}{\bf P300ScreenLayoutReader}$\ast$ {\bf OpenViBEApplications::P300KeyboardHandler::m\_\-pLayoutObject}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_a1fd87979441e2834eef9f3f363f49561}
an object containing the descriptions of the key properties as specified in the keyboard layout files such as 5by10-\/abc-\/gray.xml \hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_aaa8dbe9e453a27bb6741a57be97e9110}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!m\_\-pPredictionContainer@{m\_\-pPredictionContainer}}
\index{m\_\-pPredictionContainer@{m\_\-pPredictionContainer}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{m\_\-pPredictionContainer}]{\setlength{\rightskip}{0pt plus 5cm}{\bf GContainer}$\ast$ {\bf OpenViBEApplications::P300KeyboardHandler::m\_\-pPredictionContainer}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_aaa8dbe9e453a27bb6741a57be97e9110}
Graphical container with the keys containing the predicted words \hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_a957c021c16780736cf2e175cdebc1f5a}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!m\_\-pPropertyObject@{m\_\-pPropertyObject}}
\index{m\_\-pPropertyObject@{m\_\-pPropertyObject}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{m\_\-pPropertyObject}]{\setlength{\rightskip}{0pt plus 5cm}{\bf P300InterfacePropertyReader}$\ast$ {\bf OpenViBEApplications::P300KeyboardHandler::m\_\-pPropertyObject}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_a957c021c16780736cf2e175cdebc1f5a}
an object containing the properties read from the interface-\/properties.xml file \hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_a22390cd11cae7a74d0d22a52edb4f32c}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!m\_\-pSymbolContainer@{m\_\-pSymbolContainer}}
\index{m\_\-pSymbolContainer@{m\_\-pSymbolContainer}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{m\_\-pSymbolContainer}]{\setlength{\rightskip}{0pt plus 5cm}{\bf GContainer}$\ast$ {\bf OpenViBEApplications::P300KeyboardHandler::m\_\-pSymbolContainer}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_a22390cd11cae7a74d0d22a52edb4f32c}
Graphical container with all static regular keys \hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_ac82daa9b67e49894444473acf01bc075}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!m\_\-ui32MaximumSymbolActivity@{m\_\-ui32MaximumSymbolActivity}}
\index{m\_\-ui32MaximumSymbolActivity@{m\_\-ui32MaximumSymbolActivity}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{m\_\-ui32MaximumSymbolActivity}]{\setlength{\rightskip}{0pt plus 5cm}OpenViBE::uint32 {\bf OpenViBEApplications::P300KeyboardHandler::m\_\-ui32MaximumSymbolActivity}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_ac82daa9b67e49894444473acf01bc075}
\hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_ad280c1e2d6f779b4720d8c11b7113aaf}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!m\_\-vActiveCycles@{m\_\-vActiveCycles}}
\index{m\_\-vActiveCycles@{m\_\-vActiveCycles}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{m\_\-vActiveCycles}]{\setlength{\rightskip}{0pt plus 5cm}std::vector$<$OpenViBE::uint32$>$ {\bf OpenViBEApplications::P300KeyboardHandler::m\_\-vActiveCycles}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_ad280c1e2d6f779b4720d8c11b7113aaf}
The number of times a group of symbols have been in FLASH state \hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_a66266cf621af51049274763bff5f1f15}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!m\_\-vButtons@{m\_\-vButtons}}
\index{m\_\-vButtons@{m\_\-vButtons}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{m\_\-vButtons}]{\setlength{\rightskip}{0pt plus 5cm}std::vector$<$ std::vector$<${\bf GButton}$\ast$$>$$\ast$ $>$$\ast$ {\bf OpenViBEApplications::P300KeyboardHandler::m\_\-vButtons}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_a66266cf621af51049274763bff5f1f15}
a vector to a vector of buttons, each vector of buttons representing a certain state \hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_a3767646cdb49bf416483f9f9455769fe}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!m\_\-vPreviousSymbolStates@{m\_\-vPreviousSymbolStates}}
\index{m\_\-vPreviousSymbolStates@{m\_\-vPreviousSymbolStates}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{m\_\-vPreviousSymbolStates}]{\setlength{\rightskip}{0pt plus 5cm}std::vector$<$OpenViBE::uint32$>$ {\bf OpenViBEApplications::P300KeyboardHandler::m\_\-vPreviousSymbolStates}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_a3767646cdb49bf416483f9f9455769fe}
\hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_ae30854286f16b23de7c72f1549bd5596}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!m\_\-vProbableSymbols@{m\_\-vProbableSymbols}}
\index{m\_\-vProbableSymbols@{m\_\-vProbableSymbols}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{m\_\-vProbableSymbols}]{\setlength{\rightskip}{0pt plus 5cm}std::vector$<$OpenViBE::boolean$>$ {\bf OpenViBEApplications::P300KeyboardHandler::m\_\-vProbableSymbols}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_ae30854286f16b23de7c72f1549bd5596}
A pre fixed number of symbols that have a probability that is higher than the specified significance level \hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_a1ac93ed15de2fd151ec5bfaf5e71a607}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!m\_\-vSymbolProbabilties@{m\_\-vSymbolProbabilties}}
\index{m\_\-vSymbolProbabilties@{m\_\-vSymbolProbabilties}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{m\_\-vSymbolProbabilties}]{\setlength{\rightskip}{0pt plus 5cm}std::vector$<$OpenViBE::float64$>$ {\bf OpenViBEApplications::P300KeyboardHandler::m\_\-vSymbolProbabilties}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_a1ac93ed15de2fd151ec5bfaf5e71a607}
probabilities for each symbol/word/key in the layout that have been accumulated so far \hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_a07584e22150a0ab2940cdd7a04a9dc1a}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!m\_\-vSymbolStates@{m\_\-vSymbolStates}}
\index{m\_\-vSymbolStates@{m\_\-vSymbolStates}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{m\_\-vSymbolStates}]{\setlength{\rightskip}{0pt plus 5cm}std::vector$<$OpenViBE::uint32$>$ {\bf OpenViBEApplications::P300KeyboardHandler::m\_\-vSymbolStates}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_a07584e22150a0ab2940cdd7a04a9dc1a}
current states of all symbols \hypertarget{classOpenViBEApplications_1_1P300KeyboardHandler_a069a6e082d8a9a1d099fbcd7b06a9292}{
\index{OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}!VisualStateMap@{VisualStateMap}}
\index{VisualStateMap@{VisualStateMap}!OpenViBEApplications::P300KeyboardHandler@{OpenViBEApplications::P300KeyboardHandler}}
\subsubsection[{VisualStateMap}]{\setlength{\rightskip}{0pt plus 5cm}std::map$<${\bf VisualState},{\bf VisualState}$>$ {\bf OpenViBEApplications::P300KeyboardHandler::VisualStateMap}\hspace{0.3cm}{\ttfamily  \mbox{[}private\mbox{]}}}}
\label{classOpenViBEApplications_1_1P300KeyboardHandler_a069a6e082d8a9a1d099fbcd7b06a9292}


The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
/home/ddevlami/openvibe2/externals/coadapt-\/p300-\/stimulator/src/handlers/\hyperlink{ovexP300KeyboardHandler_8h}{ovexP300KeyboardHandler.h}\item 
/home/ddevlami/openvibe2/externals/coadapt-\/p300-\/stimulator/src/handlers/\hyperlink{ovexP300KeyboardHandler_8cpp}{ovexP300KeyboardHandler.cpp}\end{DoxyCompactItemize}
